<main>
  <div class="row selectLocation">
    <div class="col-md-3 tabs">
      <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
        <li [ngbNavItem]="1">
          <a ngbNavLink>Properties</a>
          <ng-template ngbNavContent>
            <app-cadastre-info [properties]="properties" [history]="history" [itemSelectedFromHistory] ="itemSelectedFromHistory"
                               [propSelectFromMap]="propertySelectedFormMap" (calculateTypologyEmitter)="calculateTypology($event)"></app-cadastre-info>
          </ng-template>
        </li>
        <li [ngbNavItem]="2" *ngIf="isUserLogged">
          <a ngbNavLink (click)="refreshFavorites();">History</a>
          <ng-template ngbNavContent>
            <app-history [history]="history" (itemSelectedFromHistoryEmitter)="receivePropFromHistory($event)" (historyFilteredEmitter)="receiveHistoryFiltered($event)"></app-history>
          </ng-template>
        </li>
      </ul>
      <div [ngbNavOutlet]="nav" class="mt-2"></div>
    </div>
    <div [ngClass]="{'col-md-9': !showTypology, 'col-md-4': showTypology }">
      <app-map (propertiesEmitter)="receivePoint($event)" (propSelectFromMapEmitter)="receivePropSelected($event)" [history]="history" [itemSelectedFromHistory] ="itemSelectedFromHistory"
                [historyFilteredFromList]="historyFilteredFromList"></app-map>
    </div>
    <div *ngIf="showTypology" id="typology" class="col-md-5">
      <app-typology [categories]="categories"></app-typology>
    </div>
  </div>

</main>

