<div>
  <ul  ngbNav #nav="ngbNav" class="nav-tabs" [(activeId)]="active">
    <li [ngbNavItem]="1" class="nav-item" *ngIf="selectTypology">
      <a ngbNavLink >Typology</a>
      <ng-template ngbNavContent>
        <div *ngIf="building.typology">
          <p><b>Building:</b> {{building.typology.categoryName}}</p>
          <hr>
        </div>
        <div>
          <h3>
            Selection Building
          </h3>
          <p>
            1. Choose the building most similar to the one you are looking for
          </p>
          <hr>
        </div>
        <div  fxLayout="row" fxLayoutAlign="end center" >
          <button (click)="selectCategory(true);" class="btn calculateTyp" [disabled]="!typologySelected">
            Continue
          </button>
        </div>
        <div fxLayout="row"
             fxLayout.lt-sm="column"
             fxLayoutGap="5px"
             fxLayoutAlign="space-between " class="form-group">
          <ng-container *ngFor="let cat of typologies " >
            <div class="card" fxFlex="0 1 calc(100% - 5px)"
                 fxFlex.lt-md="0 1 calc(100% - 5px)"
                 fxFlex.lt-sm="100%" id="{{cat.categoryCode}}" >
              <div class="card-header">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox"  id="check-{{cat.categoryPicCode}}" value="{{typologySelected}}"
                         (click)="typologySelected = cat" [hidden]="building.country === 'NL' ">
                  <label class="form-check-label" for="check-{{cat.categoryPicCode}}">
                    <h4>{{cat.categoryName}}</h4>
                  </label>
                </div>
              </div>
              <div class="card-body" [hidden]=" building.country !== 'NL' " *ngIf="subcategoriesTypo && subcategoriesTypo[cat.categoryCode] && subcategoriesTypo[cat.categoryCode].subcats">
                <div class="form-check" *ngFor="let sub of subcategoriesTypo[cat.categoryCode].subcats">
                  <input class="form-check-input" type="radio" name="flexRadioDefault" id="{{sub.category_pic_code}}" value="{{typologySelected}}" (click)="typologySelected = sub.info">
                  <label class="form-check-label" for="{{sub.category_pic_code}}">
                    {{sub.description}}
                  </label>
                </div>
              </div>
                  <img class="card-img-top" alt="Building image"  src="./assets/img/typology/{{building.country}}/{{cat.picName}}">
              </div>
          </ng-container>
        </div>
      </ng-template>
    </li>
    <li [ngbNavItem]="2" class="nav-item" [disabled]="!building.typology.categoryName" *ngIf="building.typology">
      <a ngbNavLink >Building Data</a>
      <ng-template ngbNavContent>
        <div >
          <p><b>Building:</b> {{building.typology.categoryName}}</p>
          <hr>
        </div>
        <div>
          <h3>
            Building Data
          </h3>
          <hr>
        </div>
        <div fxLayout="row"
             fxLayout.lt-sm="column"
             fxLayoutGap="5px"
             fxLayoutAlign="space-between ">
          <ng-container *ngFor="let env of building.typology.enveloped ">
            <div class="card" fxFlex="0 1 calc(33.3% - 5px)"
                 fxFlex.lt-md="0 1 calc(33.3% - 5px)"
                 fxFlex.lt-sm="100%">
              <div class="card-header">
                <h4>{{env.componentType}}</h4>
              </div>
              <a>
                <img class="card-img-top" alt="Envelope image"  src="./assets/img/envelope/{{building.country}}/{{env.picture}}">
              </a>
              <div class="card-body">
                <p>{{env.description}}</p>
                <p>{{env.typeConstruction}}</p>
                <p>{{env.uValue}}</p>
              </div>
            </div>
          </ng-container>
        </div>
      </ng-template>
    </li>
    <li [ngbNavItem]="3" class="nav-item" [disabled]="!building.typology.categoryName" *ngIf="building.typology">
      <a ngbNavLink>System Type</a>
      <ng-template ngbNavContent>
        <div>
          <p><b>Building:</b> {{building.typology.categoryName}}</p>
          <hr>
        </div>
        <div>
          <h3>
            System Type
          </h3>
          <hr>
        </div>
        <div class="systems">
          <ng-select [(ngModel)]="systemSelected">
            <ng-option *ngFor="let sys of building.typology.system" [value]="sys">{{sys.description}}</ng-option>
          </ng-select>
        </div>
        <div fxLayout="row"
             fxLayout.lt-sm="column"
             fxLayoutGap="5px"
             fxLayoutAlign="space-between ">
          <ng-container *ngFor="let systems of systemSelected.systems ">
            <div class="card" fxFlex="0 1 calc(33.3% - 5px)"
                 fxFlex.lt-md="0 1 calc(33.3% - 5px)"
                 fxFlex.lt-sm="100%">
              <div class="card-header">
                <h4>{{systems.name}}</h4>
              </div>
              <a>
                <img class="card-img-top" alt="System image"  src="./assets/img/system/{{building.country}}/{{systems.picture}}">
              </a>
              <div class="card-body">
                <p>{{systems.systemCode}}</p>
                <p>{{systems.description}}</p>
              </div>
            </div>
          </ng-container>
        </div>
      </ng-template>
    </li>
  </ul>

  <div class="typologyInfo" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="30px" >
    <a class="btn calculateTyp" role="button"  routerLink='/score' routerLinkActive='active' (click)="calculateEfficiency();" *ngIf="building.typology && building.typology.enveloped && building.typology.enveloped.length > 0">
      <span> <i class="fa fa-cog" aria-hidden="true"></i> Calculate</span>
    </a>
  </div>
  <div class="container" [ngbNavOutlet]="nav"
       fxLayout="column"
       fxLayoutGap="30px" >
  </div>
</div>

